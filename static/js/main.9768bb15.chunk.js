(this["webpackJsonpreact-redux-permission-example"]=this["webpackJsonpreact-redux-permission-example"]||[]).push([[0],{22:function(e,t,n){"use strict";n.r(t);n(9);var r=n(0),i=n.n(r),a=n(2),s=n.n(a),c=i.a.createContext({}),o=function(e){var t=e.store,n=e.children,a=e.reducerKey,s=void 0===a?"reactReduxPermission":a;if(!t)return null;var o=t.dispatch,u=t.getState,d=t.subscribe,l=u(),f=function(e){return e[s]&&e[s].permissions},m=function(e){return e[s]&&e[s].isLoaded},E=Object(r.useState)(f(l)),h=E[0],p=E[1],v=Object(r.useState)(m(l)),b=v[0],O=v[1];d((function(){var e=u(),t=f(e),n=m(e);JSON.stringify(t)!==JSON.stringify(h)&&p(t),n!==b&&O(n)}));return i.a.createElement(c.Provider,{value:{permissions:h,hasPermission:function(e){if(h){var t=!0;return"string"===typeof e?-1!==h.indexOf(e):(e.forEach((function(e){-1===h.indexOf(e)&&(t=!1)})),t)}return!1},definePermission:function(e){return o({type:"@@RRP:DEFINE_PERMISSIONS",payload:e})},isLoaded:!!b}},n)},u={isLoaded:!1,permissions:[]},d=function(){return JSON.parse(JSON.stringify(u))};var l=function(e){var t=e.when,n=void 0===t?"":t,a=e.fallback,s=e.children,o=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["when","fallback","children"]);return(0,Object(r.useContext)(c).hasPermission)(n)?i.a.Children.map(s,(function(e){return i.a.cloneElement(e,o)})):a||null},f={borderBottom:"1px solid rgba(32,32,32,0.1)",padding:20,fontSize:20},m=function(){var e=function(){var e=Object(r.useContext)(c),t=e.hasPermission,n=e.definePermission;return{isLoaded:e.isLoaded,hasPermission:function(e){return Object(r.useMemo)((function(){return t(e)}),[e])},definePermission:n}}(),t=e.hasPermission,n=e.definePermission,a=e.isLoaded;Object(r.useEffect)((function(){return setTimeout((function(){n(["feature:read","feature:write"])}),2500),function(){}}),[]);var s=t("feature:read"),o=t("feature:write"),u=t("feature:delete");return a?i.a.createElement("div",{style:{padding:14}},i.a.createElement("h1",null,"React Redux Permission "),i.a.createElement("p",null,"RRP for conditional rendering of components and routes."),i.a.createElement("div",{style:f},"feature:read Access (","".concat(s),")"),i.a.createElement("div",{style:f},"feature:write Access (","".concat(o),")"),i.a.createElement("div",{style:f},"feature:delete Access (","".concat(u),")"),i.a.createElement(l,{when:"feature:read"},i.a.createElement("div",{style:f},"i'm visible because the user has the feature:read permission.")),i.a.createElement(l,{when:"feature:write"},i.a.createElement("div",{style:f},"i'm visible because the user has the feature:write permission.")),i.a.createElement(l,{when:"feature:delete",fallback:i.a.createElement("div",{style:f},"I'm a fallback that's rendering because the user doesn't have access to feature:delete")},i.a.createElement("div",{style:f},"i'm visible because the user has the feature:delete permission."))):i.a.createElement("div",null,"LOADING...")},E=n(1),h=Object(E.b)({permission:function(e,t){switch(void 0===e&&(e=d()),t.type){case"@@RRP:DEFINE_PERMISSIONS":return Object.assign({},e,{isLoaded:!0,permissions:t.payload});case"@@RRP:RESET_PERMISSIONS":return d();default:return e}}});var p=n(7),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||E.c,n=Object(E.d)(h,e,t());return n}();s.a.render(i.a.createElement(p.a,{store:v},i.a.createElement(o,{store:v,reducerKey:"permission"},i.a.createElement(m,null))),document.getElementById("root"))},8:function(e,t,n){e.exports=n(22)},9:function(e,t,n){}},[[8,1,2]]]);
//# sourceMappingURL=main.9768bb15.chunk.js.map